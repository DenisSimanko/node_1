const express = require('express'),
  router = express.Router(),
  bodyParser = require('body-parser'),
  mongoose = require('mongoose');

router.use(bodyParser.urlencoded({ extended: true }));
router.use('/blogPartials', express.static('views/blog'));

// mongoose.connect('mongodb://localhost', { dbName: 'blog' });
const blogSchema = new mongoose.Schema({
  title: String,
  image: { type: String, default: 'data:image/png;base64,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' },
  body: String,
  created: { type: Date, default: Date.now }
});
const Blog = mongoose.model('Blog', blogSchema);

router.get('/', function (req, res) {
  res.redirect('blog/index');
})

router.get('/blogs', function (req, res) {
  Blog.find({}, function (err, blogs) {
    if (err) {
      res.send(err);
    }
    res.render('blog/index', { blogs });
  });
})



module.exports = router;